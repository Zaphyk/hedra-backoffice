<!DOCTYPE html>
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="../images/icon.ico">
<!-- Bootstrap core CSS -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="../stylesheets/dashboard.css" rel="stylesheet">

  <link href="../stylesheets/custom.css" rel="stylesheet">
  
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
 <script src="./validate.js"> </script>
</head>

<body>

<nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse" style="box-shadow: 2px 4px 8px rgba(0, 0, 0, .5);">
    <button class="navbar-toggler navbar-toggler-right hidden-lg-up" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
      
      <br />
    <a class="navbar-brand" href="https://v4-alpha.getbootstrap.com/examples/dashboard/#">Dashboard</a>
    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav mr-auto">
    </ul>
</div>
</nav>
<div class="container-fluid">
  <div class="row">
    <nav class="col-sm-3 col-md-2 hidden-xs-down bg-faded sidebar" style="background-color:#32373c;">
      <ul class="nav nav-pills flex-column"	>
        <li class="nav-item"> <a class="nav-link" style="color:white;" href="/dashboard/">Overview</a> </li>
        <li class="nav-item"> <a class="nav-link" style="color:white;" href="/updates/">Manage Updates</a> </li>
        <li class="nav-item"> <a class="nav-link" style="color:white;" href="/servers/">Servers</a> </li>
        <li class="nav-item"> <a class="nav-link active" style="color:white;" href="/reports/">Reports</a> </li>
      </ul>
    </div>
  </div>
    
    <main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">
    <h1>Crash Reports</h1>
		<div class="col-12 col-sm-12 placeholder">
                    <table id="userTable" class="table">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>IP</th>
                          <th>Location</th>
                          <th>Crash Log</th>
                          <th>Version</th>
                          <th>Date</th>
                          <th><center>Details</center></th>
                        </tr>
                      </thead>
                    </table>
          </div>
    </main>
<!-- Bootstrap core JavaScript
  ================================================== --> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"> </script>
	  <script>
		
			$.get("https://hedra-account-system.herokuapp.com/request?type=retrieve&retrievetype=crashes", function (crashdata){
				
				LoadCrashData(JSON.parse("["+crashdata+"]"));
			});
	  
	  function LoadCrashData(crashes){
		//cross data
		//ip -country - log -version - date
		  
		var tableBody = document.getElementById("userTable");
		tableBody.innerHTML += "<tbody>"
		for(i = 0; i < crashes.length; i+=5){
		  var num = i / 5+1; 
		  tableBody.innerHTML +=
		  '<tr>'
			+'<th scope="row">' +num+ '</th>'
			+'<td>'+crashes[i+0]+'</td>'
			+'<td>'+crashes[i+1]+'</td>'
			+'<td>'+crashes[i+2]+'</td>'
			+'<td>'+new Date(crashes[i+3])+'</td>'
			+'<td>'+new Date(crashes[i+4])+'</td>'
			+'<td><center><button class="btn btn-default" aria-label="More"  style="width:30px;height:30px;font-weight:bold;"><span style="font-weight:bold;">...</span></button></center></td>'
		  +'</tr>'
		}
		tableBody.innerHTML += "</tbody>";
	}
	</script>

  <script type="text/javascript">
    $('a[href*="#"]')
    // Remove links that don't actually link to anything
    .not('[href="#"]')
    .not('[href="#0"]')
    .click(function(event) {
      // On-page links
      if (
        location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') 
        && 
        location.hostname == this.hostname
      ) {
        // Figure out element to scroll to
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
        // Does a scroll target exist?
        if (target.length) {
          // Only prevent default if animation is actually gonna happen
          event.preventDefault();
          $('html, body').animate({
            scrollTop: target.offset().top
          }, 1000, function() {
            // Callback after animation
            // Must change focus!
            var $target = $(target);
            $target.focus();
            if ($target.is(":focus")) { // Checking if the target was focused
              return false;
            } else {
              $target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
              $target.focus(); // Set focus again
            };
          });
        }
      }
    });
  </script>
</body>
</html>
